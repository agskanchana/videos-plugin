# Ekwa Video Block

A modern WordPress Gutenberg block for embedding YouTube and Vimeo videos with custom thumbnails, lazy loading, and enhanced user experience.

## Features

- **Gutenberg Block Integration**: Native WordPress block editor support
- **Server-Side Rendering**: Update-friendly architecture that won't break existing blocks
- **Video Platform Support**: YouTube and Vimeo videos
- **Custom Thumbnails**: Upload custom video thumbnails or use auto-generated ones
- **Lazy Loading**: Videos load only when clicked for better page performance
- **Responsive Design**: Mobile-friendly responsive video player
- **Schema.org Support**: Built-in structured data for SEO
- **Accessibility**: WCAG compliant with proper focus states and keyboard navigation
- **Shortcode Support**: `[ekwa_video]` shortcode with full attribute support

## Installation

1. Upload the plugin files to `/wp-content/plugins/ekwa-video-block/`
2. Activate the plugin through the 'Plugins' screen in WordPress
3. Use the block editor to add 'Ekwa Video' blocks to your posts/pages

## Usage

### Gutenberg Block

1. In the block editor, click the '+' button to add a new block
2. Search for 'Ekwa Video' and select it
3. Enter a YouTube or Vimeo URL in the sidebar settings
4. The plugin will automatically fetch video metadata
5. Optionally upload a custom thumbnail image
6. Configure display settings (show title, description, autoplay)
7. Publish your post/page

### Shortcode Usage

```php
[ekwa_video 
    video_url="https://www.youtube.com/watch?v=VIDEO_ID"
    show_title="true"
    show_description="false"
    autoplay="false"
    custom_thumbnail="https://example.com/custom-thumb.jpg"
]
```

#### Shortcode Parameters

- `video_url` (required): YouTube or Vimeo video URL
- `video_type`: 'youtube' or 'vimeo' (auto-detected if not provided)
- `video_id`: Video ID (auto-extracted if not provided)
- `embed_url`: Embed URL (auto-generated if not provided)
- `video_title`: Custom video title
- `video_description`: Custom video description
- `video_duration`: Video duration in ISO 8601 format (PT1M30S)
- `upload_date`: Video upload date
- `thumbnail_url`: Video thumbnail URL (auto-fetched if not provided)
- `custom_thumbnail`: URL to custom thumbnail image
- `custom_thumbnail_alt`: Alt text for custom thumbnail
- `show_title`: Show/hide video title (true/false)
- `show_description`: Show/hide video description (true/false)
- `autoplay`: Enable autoplay when video loads (true/false)
- `class_name`: Additional CSS classes

## Plugin Architecture

### File Structure

```
ekwa-video-block/
├── ekwa-video-block.php          # Main plugin file
├── assets/
│   ├── js/
│   │   ├── block.js               # Gutenberg block JavaScript
│   │   └── frontend.js            # Frontend functionality
│   └── css/
│       ├── editor.css             # Block editor styles
│       └── frontend.css           # Frontend styles
└── README.md                      # This file
```

### Key Classes and Methods

#### Main Plugin Class: `EkwaVideoBlock`

- `init()`: Initialize plugin hooks and registration
- `register_block()`: Register the Gutenberg block with attributes
- `render_block()`: Server-side block rendering (calls shortcode)
- `render_video_shortcode()`: Main shortcode rendering logic
- `extract_video_info()`: Extract video ID and type from URLs
- `get_video_metadata()`: Fetch video metadata from APIs
- `get_youtube_metadata()`: YouTube-specific metadata fetching
- `get_vimeo_metadata()`: Vimeo-specific metadata fetching

### Server-Side Rendering Benefits

This plugin uses server-side rendering, which means:

- **Update Friendly**: Block content is generated by PHP, so updates won't break existing blocks
- **SEO Optimized**: Content is available to search engines immediately
- **Performance**: No JavaScript required for basic functionality
- **Consistency**: Same rendering logic for blocks and shortcodes

## Customization

### CSS Classes

The plugin generates the following CSS classes for styling:

- `.ekwa-video-wrapper`: Main video container
- `.ekwa-video-title`: Video title element
- `.ekwa-video-player`: Video player container
- `.ekwa-video-thumbnail`: Thumbnail container
- `.ekwa-video-thumb-img`: Thumbnail image
- `.ekwa-video-play-button`: Play button overlay
- `.ekwa-video-duration`: Duration display
- `.ekwa-video-description`: Video description container
- `.ekwa-video-youtube`: YouTube video wrapper
- `.ekwa-video-vimeo`: Vimeo video wrapper

### Custom CSS Example

```css
.ekwa-video-wrapper {
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.ekwa-video-title {
    font-family: 'Your Custom Font', sans-serif;
    color: #your-brand-color;
}

.ekwa-video-play-button:hover {
    transform: translate(-50%, -50%) scale(1.2);
}
```

### JavaScript Hooks

The plugin triggers custom events for advanced customization:

```javascript
// Listen for video load events
jQuery(document).on('ekwaVideoLoaded', function(e, data) {
    console.log('Video loaded:', data.videoType, data.videoId);
    // Your custom code here
});

// Custom analytics tracking
jQuery(document).on('ekwa_video_analytics', function(e, data) {
    // Send to your analytics platform
    gtag('event', 'video_interaction', {
        'video_type': data.videoType,
        'video_id': data.videoId
    });
});
```

## API Integration

### YouTube API (Optional)

For enhanced YouTube metadata fetching, you can add a YouTube API key:

```php
// In your theme's functions.php or a custom plugin
add_filter('ekwa_video_youtube_api_key', function() {
    return 'YOUR_YOUTUBE_API_KEY';
});
```

### Vimeo API

The plugin uses Vimeo's oEmbed API which doesn't require authentication for basic metadata.

## Performance Optimization

### Lazy Loading

Videos are loaded only when the user clicks the thumbnail, improving:

- **Page Load Speed**: No heavy iframe embeds on initial page load
- **Bandwidth Usage**: Reduces data usage, especially on mobile
- **Core Web Vitals**: Better LCP and CLS scores

### Image Optimization

- Responsive images with appropriate sizing
- WebP support when available
- Lazy loading for video thumbnails

## Accessibility Features

- **Keyboard Navigation**: Full keyboard support for all interactive elements
- **Screen Reader Support**: Proper ARIA labels and descriptions
- **Focus Management**: Clear focus indicators
- **Alt Text Support**: Custom alt text for thumbnails

## Browser Support

- Modern browsers (Chrome, Firefox, Safari, Edge)
- Internet Explorer 11+ (with polyfills)
- Mobile browsers (iOS Safari, Chrome Mobile)

## Changelog

### Version 1.0.0
- Initial release
- Gutenberg block with server-side rendering
- YouTube and Vimeo support
- Custom thumbnail upload
- Responsive design
- Schema.org structured data
- Shortcode support

## Contributing

This plugin follows WordPress coding standards and best practices. When contributing:

1. Follow [WordPress Coding Standards](https://developer.wordpress.org/coding-standards/)
2. Test with WordPress 5.0+ and latest Gutenberg
3. Ensure accessibility compliance
4. Test on multiple browsers and devices

## Support

For support and feature requests, please contact the Ekwa development team.

## License

This plugin is licensed under the GPL v2 or later.

---

*Developed by Ekwa Team - https://www.ekwa.com*
